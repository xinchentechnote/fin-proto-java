// Code generated by fin-protoc. DO NOT EDIT.
package com.finproto.szse.bin.messages;

import com.finproto.codec.BinaryCodec;
import com.finproto.codec.ChecksumService;
import com.finproto.codec.ChecksumServiceContext;
import io.netty.buffer.ByteBuf;
import java.util.HashMap;
import java.util.Map;
import java.util.Objects;
import java.util.function.Supplier;

public class SzseBinary implements BinaryCodec {
  private int msgType;
  private int bodyLength;
  private BinaryCodec body;
  private int checksum;

  public int getMsgType() {
    return this.msgType;
  }

  public void setMsgType(int msgType) {
    this.msgType = msgType;
  }

  public int getBodyLength() {
    return this.bodyLength;
  }

  public void setBodyLength(int bodyLength) {
    this.bodyLength = bodyLength;
  }

  public BinaryCodec getBody() {
    return this.body;
  }

  public void setBody(BinaryCodec body) {
    this.body = body;
  }

  public int getChecksum() {
    return this.checksum;
  }

  public void setChecksum(int checksum) {
    this.checksum = checksum;
  }

  @Override
  public void encode(ByteBuf byteBuf) {
    byteBuf.writeInt(this.msgType);
    int bodyLengthPos = byteBuf.writerIndex();
    byteBuf.writeInt(0);

    int bodyStart = byteBuf.writerIndex();
    if (this.body != null) {
      this.body.encode(byteBuf);
    }
    int bodyEnd = byteBuf.writerIndex();
    this.bodyLength = (int) (bodyEnd - bodyStart);
    byteBuf.setInt(bodyLengthPos, this.bodyLength);
    ChecksumService<ByteBuf, Integer> checksumService =
        ChecksumServiceContext.getChecksumService("SZSE_BIN");
    if (checksumService != null) {
      this.checksum = (int) checksumService.calc(byteBuf);
    }
    byteBuf.writeInt(this.checksum);
  }

  @Override
  public void decode(ByteBuf byteBuf) {
    this.msgType = byteBuf.readInt();
    this.bodyLength = byteBuf.readInt();
    this.body = BodyMessageFactory.getInstance().create(this.msgType);
    this.body.decode(byteBuf);
    this.checksum = byteBuf.readInt();
  }

  @Override
  public int hashCode() {
    return Objects.hash(msgType, bodyLength, body, checksum);
  }

  @Override
  public boolean equals(Object obj) {
    if (this == obj) {
      return true;
    }
    if (null == obj || getClass() != obj.getClass()) {
      return false;
    }
    SzseBinary orther_ = (SzseBinary) obj;
    return Objects.equals(msgType, orther_.msgType)
        && Objects.equals(bodyLength, orther_.bodyLength)
        && Objects.equals(body, orther_.body)
        && Objects.equals(checksum, orther_.checksum);
  }

  @Override
  public String toString() {
    return "SzseBinary ["
        + "msgType="
        + this.msgType
        + ", bodyLength="
        + this.bodyLength
        + ", body="
        + this.body
        + ", checksum="
        + this.checksum
        + "]";
  }

  public static enum BodyMessageFactory {
    INSTANCE;
    private final Map<Integer, Supplier<BinaryCodec>> bodyMap = new HashMap<>();

    static {
      getInstance().register((int) 1, Logon::new);
      getInstance().register((int) 2, Logout::new);
      getInstance().register((int) 3, Heartbeat::new);
      getInstance().register((int) 4, BusinessReject::new);
      getInstance().register((int) 5, ReportSynchronization::new);
      getInstance().register((int) 6, PlatformStateInfo::new);
      getInstance().register((int) 7, ReportFinished::new);
      getInstance().register((int) 9, PlatformPartition::new);
      getInstance().register((int) 10, TradingSessionStatus::new);
      getInstance().register((int) 100101, NewOrder::new);
      getInstance().register((int) 100201, NewOrder::new);
      getInstance().register((int) 100301, NewOrder::new);
      getInstance().register((int) 100401, NewOrder::new);
      getInstance().register((int) 100501, NewOrder::new);
      getInstance().register((int) 100601, NewOrder::new);
      getInstance().register((int) 100701, NewOrder::new);
      getInstance().register((int) 101201, NewOrder::new);
      getInstance().register((int) 101301, NewOrder::new);
      getInstance().register((int) 101401, NewOrder::new);
      getInstance().register((int) 101501, NewOrder::new);
      getInstance().register((int) 101601, NewOrder::new);
      getInstance().register((int) 101701, NewOrder::new);
      getInstance().register((int) 101801, NewOrder::new);
      getInstance().register((int) 101901, NewOrder::new);
      getInstance().register((int) 102301, NewOrder::new);
      getInstance().register((int) 102701, NewOrder::new);
      getInstance().register((int) 102801, NewOrder::new);
      getInstance().register((int) 102901, NewOrder::new);
      getInstance().register((int) 103101, NewOrder::new);
      getInstance().register((int) 106301, NewOrder::new);
      getInstance().register((int) 103301, NewOrder::new);
      getInstance().register((int) 103501, NewOrder::new);
      getInstance().register((int) 103701, NewOrder::new);
      getInstance().register((int) 104101, NewOrder::new);
      getInstance().register((int) 104128, NewOrder::new);
      getInstance().register((int) 104701, NewOrder::new);
      getInstance().register((int) 200102, ExecutionConfirm::new);
      getInstance().register((int) 200202, ExecutionConfirm::new);
      getInstance().register((int) 200302, ExecutionConfirm::new);
      getInstance().register((int) 200402, ExecutionConfirm::new);
      getInstance().register((int) 200502, ExecutionConfirm::new);
      getInstance().register((int) 200602, ExecutionConfirm::new);
      getInstance().register((int) 200702, ExecutionConfirm::new);
      getInstance().register((int) 201202, ExecutionConfirm::new);
      getInstance().register((int) 201302, ExecutionConfirm::new);
      getInstance().register((int) 201402, ExecutionConfirm::new);
      getInstance().register((int) 201502, ExecutionConfirm::new);
      getInstance().register((int) 201602, ExecutionConfirm::new);
      getInstance().register((int) 201702, ExecutionConfirm::new);
      getInstance().register((int) 201802, ExecutionConfirm::new);
      getInstance().register((int) 201902, ExecutionConfirm::new);
      getInstance().register((int) 202202, ExecutionConfirm::new);
      getInstance().register((int) 202302, ExecutionConfirm::new);
      getInstance().register((int) 202702, ExecutionConfirm::new);
      getInstance().register((int) 202802, ExecutionConfirm::new);
      getInstance().register((int) 202902, ExecutionConfirm::new);
      getInstance().register((int) 203102, ExecutionConfirm::new);
      getInstance().register((int) 206302, ExecutionConfirm::new);
      getInstance().register((int) 203302, ExecutionConfirm::new);
      getInstance().register((int) 203502, ExecutionConfirm::new);
      getInstance().register((int) 203702, ExecutionConfirm::new);
      getInstance().register((int) 204102, ExecutionConfirm::new);
      getInstance().register((int) 204129, ExecutionConfirm::new);
      getInstance().register((int) 204702, ExecutionConfirm::new);
      getInstance().register((int) 200115, ExecutionReport::new);
      getInstance().register((int) 200215, ExecutionReport::new);
      getInstance().register((int) 200315, ExecutionReport::new);
      getInstance().register((int) 200415, ExecutionReport::new);
      getInstance().register((int) 200515, ExecutionReport::new);
      getInstance().register((int) 200615, ExecutionReport::new);
      getInstance().register((int) 200715, ExecutionReport::new);
      getInstance().register((int) 206315, ExecutionReport::new);
      getInstance().register((int) 203715, ExecutionReport::new);
      getInstance().register((int) 204115, ExecutionReport::new);
      getInstance().register((int) 204130, ExecutionReport::new);
      getInstance().register((int) 190007, OrderCancelRequest::new);
      getInstance().register((int) 290008, CancelReject::new);
    }

    public BinaryCodec create(Integer msgType) {
      Supplier<BinaryCodec> supplier = bodyMap.get(msgType);
      if (null == supplier) {
        throw new IllegalArgumentException("Unsupported MsgType:" + msgType);
      }
      return supplier.get();
    }

    public void register(Integer msgType, Supplier<BinaryCodec> supplier) {
      bodyMap.put(msgType, supplier);
    }

    public boolean remove(Integer msgType) {
      return null != bodyMap.remove(msgType);
    }

    public static BodyMessageFactory getInstance() {
      return INSTANCE;
    }
  }
}
